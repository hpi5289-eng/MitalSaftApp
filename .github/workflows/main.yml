name: Debug Android Build

on: workflow_dispatch

jobs:
  debug-build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Show project structure
      run: |
        echo "=== FULL PROJECT STRUCTURE ==="
        find . -type f -name "*.gradle" -o -name "*.kt" -o -name "*.java" | head -20
        echo ""
        echo "=== GRADLE FILES ==="
        find . -name "*.gradle*" -type f
        
    - name: Check Gradle version
      run: |
        ./gradlew --version || echo "Gradle not working"
        
    - name: Try to build with debug info
      run: |
        # Clean first
        ./gradlew clean --no-daemon
        
        # Try build with all debug info
        ./gradlew :app:assembleDebug \
          --stacktrace \
          --info \
          --no-daemon \
          --console=verbose || true
        
    - name: Check Gradle tasks
      run: |
        ./gradlew tasks --all || echo "Cannot list tasks"
